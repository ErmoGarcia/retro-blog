---
import DesktopIcon from '../../components/DesktopIcon.astro';
import Layout from '../../layouts/Layout.astro';
import { getCollection } from "astro:content"

export async function getStaticPaths() {
	const allDirectories = await getCollection('directories');
	return allDirectories.map(directory => ({ params: { id: directory.id }}));
}

const { id } = Astro.params;
const allFiles = await getCollection('files');
const files = allFiles.filter(file => file.data.directory == id);
---
<Layout>
	<div class="bg-wild-sand-100 h-full">
		<div class="flex flex-col flex-wrap items-start gap-10 px-10 py-20">
			{files.map(file => (
				<DesktopIcon id={file.id} type="file" name={file.data.name} icon={"/src/assets/file.svg"} />
			))}
		</div>
	</div>
</Layout>
